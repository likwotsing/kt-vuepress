# Express

Node本身并不支持常见的web开发任务。如果需要处理一些HTTP请求、处理不同URL路径的请求(路由)、用模板来动态创建响应，就需要自己编写代码实现，所以出现了一些web框架，如Express。

Express有如下机制：

- 为不同URL路径中使用不同HTTP动词的请求(路由)编写处理程序。
- 集成“视图“渲染引擎，可以将数据插入模板生成响应。
- 设置常见的web应用，如连接的端口、渲染响应模板的位置
- **在请求处理的任何位置添加额外的请求处理"中间件"**

## 中间件

- 中间件可以执行任何操作，运行任何代码，更改请求和响应对象，也可以**结束“请求-响应”周期**。如果它没有结束响应，则必须调用`next()`将控制传递给下一个中间件函数(否则请求将成为悬挂请求)。

- 中间件和路由函数是按声明顺序调用的。中间件的引入顺序很重要(如果会话中间依赖于cookie中间件，则必须先添加cookie处理器)。一般情况下先调用中间件后设置路由，否则路由处理器将无法访问中间件功能。
- 中间件函数和路由处理回调的唯一区别：中间件函数有第三个参数`next`，在中间件不会结束请求周期时应调用这个`next`。

### 使用中间件

```js
const  myMiddleware = (req, res, next) => {
    // ...
    next();
}
// 用use()为所有路由和动词添加该函数
app.use(myMiddleware);
// 用use()为一个特定的路由添加该函数
app.use('/login', myMiddleware);
// 为一个特定的HTTP动词和路由添加该函数
app.get('/', myMiddleware);
```

## 托管静态文件

